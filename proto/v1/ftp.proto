syntax = 'proto3';

package beget.ftp.v1.structures;

import "ftp/proto/v1/structures.proto";
import "google/api/annotations.proto";

service FtpService {
    rpc getList (GetAccountListRequest) returns (GetAccountListResponse) {
        option: (google.api.http) = {
            get: "/v1/ftp/list"
        };
    }

    rpc addAccount (AddAccountRequest) returns (AddAccountResponse) {
        option: (google.api.http) = {
            get: "/v1/ftp/add"
        };
    }

    rpc deleteAccount (RemoveAccountRequest) returns (RemoveAccountResponse) {
        option: (google.api.http) = {
            get: "/v1/ftp/delete"
        };
    }

    rpc changePassword (SetPasswordRequest) returns (SetPasswordResponse) {
        option: (google.api.http) = {
            get: "/v1/ftp/changePassword"
        };
    }
}

message GetAccountListRequest {

}

message GetAccountListResponse {
    repeated structures.FtpAccount = 1;
}

message AddAccountRequest {
    string suffix = 1;
    string password = 2;
    string path = 3;
}

message AddAccountResponse {
    structures.FtpAccount = 1;
}

message RemoveAccountRequest {
    uint32 suffix = 1;
}

message RemoveAccountResponse {
    oneof result {
        Success success = 1;
        Error error = 2;
    }

    message Success {
    }
}

message ToggleSshRequest {
    uint32 suffix = 1;
}

message ToggleSshResponse {
    oneof result {
        structures.FtpAccount = 1;
        Error error = 2;
    }
}

message SetPasswordRequest {
    uint32 account_id = 1;
    string password = 2;
}

message SetPasswordResponse {
    oneof result {
        Success success = 1;
        Error error = 2;
    }

    message Success {
    }
}

message Error {
    enum Code {
        INTERNAL_ERROR = 0;
    }

    string message = 1;
}
